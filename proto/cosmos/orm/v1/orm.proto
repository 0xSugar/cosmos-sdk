syntax = "proto3";

package cosmos.orm.v1alpha1;

import "google/protobuf/descriptor.proto";

option go_package = "github.com/cosmos/cosmos-sdk/orm";

extend google.protobuf.MessageOptions {

  // table specifies that this message will be used as an ORM table. It cannot
  // be used together with the singleton option.
  TableDescriptor table = 100003790;

  // singleton specifies that this message will be used as an ORM singleton. It cannot
  // be used together with the table option.
  SingletonDescriptor singleton = 100003791;
}

// TableDescriptor describes an ORM table.
message TableDescriptor {

  // primary_key defines the primary key for the table.
  PrimaryKeyDescriptor primary_key = 1;

  // index defines one or more secondary indexes.
  repeated SecondaryIndexDescriptor index = 2;

  // id is a non-zero integer ID that must be unique within the
  // tables and singletons in this file. It may be deprecated in the future when this
  // can be auto-generated.
  uint32 id = 3;
}

// PrimaryKeyDescriptor describes a table primary key.
message PrimaryKeyDescriptor {

  // fields is a comma-separated list of fields in the primary key.
  string fields = 1;

  // auto_increment specifies that the primary key is generated by an
  // auto-incrementing integer. If this is set to true fields must only
  // contain one field of that is of type uint64.
  bool auto_increment = 2;
}

// PrimaryKeyDescriptor describes a table secondary index.
message SecondaryIndexDescriptor {

  // fields is a comma-separated list of fields in the index.
  string fields = 1;

  // id is a non-zero integer ID that must be unique within the indexes for this
  // table. It may be deprecated in the future when this can be auto-generated.
  uint32 id = 2;
}

// TableDescriptor describes an ORM singleton.
message SingletonDescriptor {

  // id is a non-zero integer ID that must be unique within the
  // tables and singletons in this file. It may be deprecated in the future when this
  // can be auto-generated.
  uint32 id = 1;
}
